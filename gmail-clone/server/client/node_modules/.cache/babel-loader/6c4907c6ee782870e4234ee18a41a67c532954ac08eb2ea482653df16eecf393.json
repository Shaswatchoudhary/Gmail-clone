{"ast":null,"code":"import{useEffect,useState}from'react';import{useParams,useOutletContext}from'react-router-dom';import useApi from'../hooks/useApi';import{API_URLS}from'../services/api.urls';import{Box,List,Checkbox}from'@mui/material';import Email from'./Email';import{DeleteOutline}from'@mui/icons-material';import NoMails from'./common/NoMails';import{EMPTY_TABS}from'../constants/constant';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Emails=()=>{var _getEmailsService$res2,_getEmailsService$res3;const[starredEmail,setStarredEmail]=useState(false);const[selectedEmails,setSelectedEmails]=useState([]);const{openDrawer}=useOutletContext();const{type}=useParams();const getEmailsService=useApi(API_URLS.getEmailFromType);const deleteEmailsService=useApi(API_URLS.deleteEmails);const moveEmailsToBin=useApi(API_URLS.moveEmailsToBin);useEffect(()=>{getEmailsService.call({},type);},[type,starredEmail]);const selectAllEmails=e=>{if(e.target.checked){var _getEmailsService$res;const emails=getEmailsService===null||getEmailsService===void 0?void 0:(_getEmailsService$res=getEmailsService.response)===null||_getEmailsService$res===void 0?void 0:_getEmailsService$res.map(email=>email._id);setSelectedEmails(emails);}else{setSelectedEmails([]);}};const deleteSelectedEmails=()=>{if(type==='bin'){deleteEmailsService.call(selectedEmails);}else{moveEmailsToBin.call(selectedEmails);}setStarredEmail(prevState=>!prevState);};return/*#__PURE__*/_jsxs(Box,{style:openDrawer?{marginLeft:250,width:'100%'}:{width:'100%'},children:[/*#__PURE__*/_jsxs(Box,{style:{padding:'20px 10px 0 10px',display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Checkbox,{size:\"small\",onChange:e=>selectAllEmails(e)}),/*#__PURE__*/_jsx(DeleteOutline,{onClick:e=>deleteSelectedEmails(e)})]}),/*#__PURE__*/_jsx(List,{children:getEmailsService===null||getEmailsService===void 0?void 0:(_getEmailsService$res2=getEmailsService.response)===null||_getEmailsService$res2===void 0?void 0:_getEmailsService$res2.map(email=>/*#__PURE__*/_jsx(Email,{email:email,setStarredEmail:setStarredEmail,selectedEmails:selectedEmails,setSelectedEmails:setSelectedEmails},email.id))}),(getEmailsService===null||getEmailsService===void 0?void 0:(_getEmailsService$res3=getEmailsService.response)===null||_getEmailsService$res3===void 0?void 0:_getEmailsService$res3.length)===0&&/*#__PURE__*/_jsx(NoMails,{message:EMPTY_TABS[type]})]});};export default Emails;","map":{"version":3,"names":["useEffect","useState","useParams","useOutletContext","useApi","API_URLS","Box","List","Checkbox","Email","DeleteOutline","NoMails","EMPTY_TABS","jsx","_jsx","jsxs","_jsxs","Emails","_getEmailsService$res2","_getEmailsService$res3","starredEmail","setStarredEmail","selectedEmails","setSelectedEmails","openDrawer","type","getEmailsService","getEmailFromType","deleteEmailsService","deleteEmails","moveEmailsToBin","call","selectAllEmails","e","target","checked","_getEmailsService$res","emails","response","map","email","_id","deleteSelectedEmails","prevState","style","marginLeft","width","children","padding","display","alignItems","size","onChange","onClick","id","length","message"],"sources":["/Users/shaswat/Documents/code/MERN-Stack-Projects/gmail-clone/server/client/src/components/Emails.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useParams, useOutletContext } from 'react-router-dom';\nimport useApi from '../hooks/useApi';\nimport { API_URLS } from '../services/api.urls';\nimport { Box, List, Checkbox } from '@mui/material';\nimport Email from './Email';\nimport { DeleteOutline } from '@mui/icons-material';\nimport NoMails from './common/NoMails';\nimport { EMPTY_TABS } from '../constants/constant';\n\nconst Emails = () => {\n    const [starredEmail, setStarredEmail] = useState(false);\n    const [selectedEmails, setSelectedEmails] = useState([]);\n\n    const { openDrawer } = useOutletContext();\n    const { type } = useParams();\n\n    const getEmailsService = useApi(API_URLS.getEmailFromType);\n    const deleteEmailsService = useApi(API_URLS.deleteEmails);\n    const moveEmailsToBin = useApi(API_URLS.moveEmailsToBin);\n\n    useEffect(() => {\n        getEmailsService.call({}, type);\n    }, [type, starredEmail])\n\n    const selectAllEmails = (e) => {\n        if (e.target.checked) {\n            const emails = getEmailsService?.response?.map(email => email._id);\n            setSelectedEmails(emails);\n        } else {\n            setSelectedEmails([]);\n        }\n    }\n\n    const deleteSelectedEmails = () => {\n        if (type === 'bin') {\n            deleteEmailsService.call(selectedEmails);\n        } else {\n            moveEmailsToBin.call(selectedEmails);\n        }\n        setStarredEmail(prevState => !prevState);\n    }\n\n    return (\n        <Box style={openDrawer ? { marginLeft: 250, width: '100%' } : { width: '100%' } }>\n            <Box style={{ padding: '20px 10px 0 10px', display: 'flex', alignItems: 'center' }}>\n                <Checkbox size=\"small\" onChange={(e) => selectAllEmails(e)} />\n                <DeleteOutline onClick={(e) => deleteSelectedEmails(e)} />\n            </Box>\n            <List>\n                {\n                    getEmailsService?.response?.map(email => (\n                        <Email \n                            email={email} \n                            key={email.id}\n                            setStarredEmail={setStarredEmail} \n                            selectedEmails={selectedEmails}\n                            setSelectedEmails={setSelectedEmails}\n                        />\n                    ))\n                }\n            </List> \n            {\n                getEmailsService?.response?.length === 0 &&\n                    <NoMails message={EMPTY_TABS[type]} />\n            }\n        </Box>\n    )\n}\n\nexport default Emails;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}